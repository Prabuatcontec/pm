{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

    <div class="container-fluid py-4">
      <div class="row">
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
          <div class="card">
            <div class="card-header p-3 pt-2">
              <div class="icon icon-lg icon-shape bg-gradient-dark shadow-dark text-center border-radius-xl mt-n4 position-absolute">
                <i class="material-icons opacity-10">weekend</i>
              </div>
              <div class="text-end pt-1">
                <p class="text-sm mb-0 text-capitalize">Today's Money</p>
                <h4 class="mb-0">$53k</h4>
              </div>
            </div>
            <hr class="dark horizontal my-0">
            <div class="card-footer p-3">
              <p class="mb-0"><span class="text-success text-sm font-weight-bolder">+55% </span>than lask week</p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
          <div class="card">
            <div class="card-header p-3 pt-2">
              <div class="icon icon-lg icon-shape bg-gradient-info shadow-info text-center border-radius-xl mt-n4 position-absolute">
                <i class="material-icons opacity-10">person</i>
              </div>
              <div class="text-end pt-1">
                <p class="text-sm mb-0 text-capitalize">Today's Users</p>
                <h4 class="mb-0">2,300</h4>
              </div>
            </div>
            <hr class="dark horizontal my-0">
            <div class="card-footer p-3">
              <p class="mb-0"><span class="text-success text-sm font-weight-bolder">+3% </span>than lask month</p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
          <div class="card">
            <div class="card-header p-3 pt-2">
              <div class="icon icon-lg icon-shape bg-gradient-success shadow-success text-center border-radius-xl mt-n4 position-absolute">
                <i class="material-icons opacity-10">person</i>
              </div>
              <div class="text-end pt-1">
                <p class="text-sm mb-0 text-capitalize">New Clients</p>
                <h4 class="mb-0">3,462</h4>
              </div>
            </div>
            <hr class="dark horizontal my-0">
            <div class="card-footer p-3">
              <p class="mb-0"><span class="text-danger text-sm font-weight-bolder">-2%</span> than yesterday</p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-sm-6">
          <div class="card">
            <div class="card-header p-3 pt-2">
              <div class="icon icon-lg icon-shape bg-gradient-info shadow-info text-center border-radius-xl mt-n4 position-absolute">
                <i class="material-icons opacity-10">weekend</i>
              </div>
              <div class="text-end pt-1">
                <p class="text-sm mb-0 text-capitalize">Sales</p>
                <h4 class="mb-0">$103,430</h4>
              </div>
            </div>
            <hr class="dark horizontal my-0">
            <div class="card-footer p-3">
              <p class="mb-0"><span class="text-success text-sm font-weight-bolder">+5% </span>than yesterday</p>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-4">
        <div class="col-lg-6 col-md-6 mt-4 mb-4">
          <div class="card z-index-2 ">
            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2 bg-transparent">
              <div class="bg-gradient-secondary   shadow-secondary   border-radius-lg py-3 pe-1">
                <div class="chart">
                  <canvas id="chart-bars-shipping" class="chart-canvas" height="250"></canvas>
                </div>
              </div>
            </div>
            <div class="card-body">
              <h6 class="mb-0 ">Shipment</h6>
              <p class="text-sm ">Last Campaign Performance</p>
              <hr class="dark horizontal">
              <div class="d-flex ">
                <i class="material-icons text-sm my-auto me-1">schedule</i>
                <p class="mb-0 text-sm"> campaign sent 2 days ago </p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-md-6 mt-4 mb-4">
          <div class="card z-index-2  ">
            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2 bg-transparent">
              <div class="bg-gradient-success shadow-success border-radius-lg py-3 pe-1">
                <div class="chart">
                  <canvas id="chart-line-shipping" class="chart-canvas" height="250"></canvas>
                </div>
              </div>
            </div>
            <div class="card-body">
              <h6 class="mb-0 "> Box Area Activity </h6>
              <p class="text-sm "> (<span class="font-weight-bolder">+15%</span>) increase in today sales. </p>
              <hr class="dark horizontal">
              <div class="d-flex ">
                <i class="material-icons text-sm my-auto me-1">schedule</i>
                <p class="mb-0 text-sm"> updated 4 min ago </p>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="row mt-4">
        <div class="col-lg-6 col-md-6 mt-4 mb-4">
          <div class="card z-index-2 ">
            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2 bg-transparent">
              <div class="bg-gradient-primary shadow-primary border-radius-lg py-3 pe-1">
                <div class="chart">
                  <canvas id="chart-bars" class="chart-canvas" height="250"></canvas>
                </div>
              </div>
            </div>
            <div class="card-body">
              <h6 class="mb-0 ">Operator Activity</h6>
              <p class="text-sm ">Last Campaign Performance</p>
              <hr class="dark horizontal">
              <div class="d-flex ">
                <i class="material-icons text-sm my-auto me-1">schedule</i>
                <p class="mb-0 text-sm"> campaign sent 2 days ago </p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-md-6 mt-4 mb-4">
          <div class="card z-index-2  ">
            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2 bg-transparent">
              <div class="bg-gradient-warning shadow-warning border-radius-lg py-3 pe-1">
                <div class="chart">
                  <canvas id="chart-line" class="chart-canvas" height="250"></canvas>
                </div>
              </div>
            </div>
            <div class="card-body">
              <h6 class="mb-0 "> Daily Sales </h6>
              <p class="text-sm "> (<span class="font-weight-bolder">+15%</span>) increase in today sales. </p>
              <hr class="dark horizontal">
              <div class="d-flex ">
                <i class="material-icons text-sm my-auto me-1">schedule</i>
                <p class="mb-0 text-sm"> updated 4 min ago </p>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="row mt-4">
        <div class="col-lg-6 col-md-6 mt-4 mb-4">
          <div class="card z-index-2 ">
            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2 bg-transparent">
              <div class="bg-gradient-light  shadow-light  border-radius-lg py-3 pe-1">
                <div class="chart">
                  <canvas id="chart-line-date" class="chart-canvas" height="250"></canvas>
                </div>
              </div>
            </div>
            <div class="card-body">
              <h6 class="mb-0 ">Operator Activity</h6>
              <hr class="dark horizontal">
              <div class="d-flex ">
                <i class="material-icons text-sm my-auto me-1">schedule</i>
                <p class="mb-0 text-sm"> campaign sent 2 days ago </p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-md-6 mt-4 mb-4">
          <div class="card z-index-2 ">
            <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2 bg-transparent">
              <div class="bg-gradient-light  shadow-light  border-radius-lg py-3 pe-1">
                <div class="chart">
                  <canvas id="chart-doughnut" class="chart-canvas" height="250"></canvas>
                </div>
              </div>
            </div>
            <div class="card-body">
              <h6 class="mb-0 ">EOL Hrs</h6>
              <hr class="dark horizontal">
              <div class="d-flex ">
                <i class="material-icons text-sm my-auto me-1">schedule</i>
                <p class="mb-0 text-sm"> campaign sent 2 days ago </p>
              </div>
            </div>
          </div>
        </div>


      </div>


      {% include 'includes/footer.html' %}
    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

  <script src="/static/assets/js/plugins/chartjs.min.js"></script>
  <script>
   $(document).ready(function () {
    var firstMotion;
    var firstShipping;
    var timeIntervalCount;
<!--   window.setTimeout(function () {-->
<!--  window.location.reload();-->
<!--}, 30000);-->

$.ajax({
type: "GET",
url: "report/box",
data: {},
contentType: "application/json",
dataType: "json",
success: function(response) {
     var charbars = charbar()
    console.log(response)
    var lab = []
    var lab_num = []
    for (var da = 6; da >= 0; da--) {
        var date = new Date();
        date.setDate(date.getDate() - da);

        var finalDate = date.getDate() + '-' + (date.getMonth() + 1) + '-' + date.getFullYear();
        var finalDateNum = (date.getMonth() + 1) + '/' + date.getDate();
        lab.push(finalDate)
        lab_num.push(finalDateNum)
    }

    for (so = 0; so <= 6; so++) {
        if (response['result']['time_report_hrs'][lab[so]] === undefined) {
            response['result']['time_report_hrs'][lab[so]] = {
                "1-2": 0
            };
            response['result']['time_report_hrs'][lab[so]] = {
                "1-2": 0
            };
            response['result']['time_report_hrs'][lab[so]] = {
                "1-2": 0
            };

        }
    }




    var ctx2 = document.getElementById("chart-line-shipping").getContext("2d");

    new Chart(ctx2, {
      type: "line",
      data: {
        labels: lab_num,
        datasets: [{
          label: "Boxing area",
          tension: 0,
          borderWidth: 0,
          pointRadius: 5,
          pointBackgroundColor: "rgba(255, 255, 255, .6)",
          pointBorderColor: "transparent",
          borderColor: "rgba(255, 255, 255, .6)",
          borderColor: "rgba(255, 255, 255, .6)",
          borderWidth: 4,
          backgroundColor: "transparent",
          fill: true,
          data: [response['result']['time_report_hrs'][lab[0]]['1-2'], response['result']['time_report_hrs'][lab[1]]['1-2'], response['result']['time_report_hrs'][lab[2]]['1-2'], response['result']['time_report_hrs'][lab[3]]['1-2'], response['result']['time_report_hrs'][lab[4]]['1-2'], response['result']['time_report_hrs'][lab[5]]['1-2'], response['result']['time_report_hrs'][lab[6]]['1-2']],
          maxBarThickness: 6

        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false,
          },tooltip: {
                    callbacks: {
                        label: function(context) {
                            var label = context.dataset.label || '';

                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += parseInt(context.parsed.y) + ' min';
                            }
                            return label;
                        }
                    }
                }
        },
        interaction: {
          intersect: false,
          mode: 'index',
        },
        scales: {
          y: {
            grid: {
              drawBorder: false,
              display: true,
              drawOnChartArea: true,
              drawTicks: false,
              borderDash: [5, 5],
              color: 'rgba(255, 255, 255, .2)'
            },
            ticks: {
              display: true,
              color: '#f8f9fa',
                        callback: function(label, index, labels) {
                            return label + ' min';

                            // return _label;
                        },
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
          x: {
            grid: {
              drawBorder: false,
              display: false,
              drawOnChartArea: false,
              drawTicks: false,
              borderDash: [5, 5]
            },
            ticks: {
              display: true,
              color: '#f8f9fa',
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
        },
      },
    });



    }

    });

function charbar() {
$.ajax({
type: "GET",
url: "report",
data: {},
contentType: "application/json",
dataType: "json",
success: function(response) {
    console.log(response)
    var ctx = document.getElementById("chart-bars").getContext("2d");

    firstMotion = response['result']['pretime'];


    var lab = []
    var lab_num = []
    for (var da = 6; da >= 0; da--) {
        var date = new Date();
        date.setDate(date.getDate() - da);

        var finalDate = date.getDate() + '-' + (date.getMonth() + 1) + '-' + date.getFullYear();
        var finalDateNum = (date.getMonth() + 1) + '/' + date.getDate();
        lab.push(finalDate)
        lab_num.push(finalDateNum)
    }

    for (so = 0; so <= 6; so++) {
        if (response['result']['time_report_count'][lab[so]] === undefined) {
            response['result']['time_report_count'][lab[so]] = {
                "1-2": 0,
                "2-3": 0,
                "3-5": 0,
                "5-10": 0,
                "10-15": 0,
                "15-60": 0
            };
            response['result']['time_report_hrs'][lab[so]] = {
                "1-2": 0,
                "2-3": 0,
                "3-5": 0,
                "5-10": 0,
                "10-15": 0,
                "15-60": 0
            };
            response['result']['time_report'][lab[so]] = {
                "1-2": 0,
                "2-3": 0,
                "3-5": 0,
                "5-10": 0,
                "10-15": 0,
                "15-60": 0
            };

        }
    }
    console.log(lab)
    console.log(response)


    var dataset = [{
        label: "1-2",
        tension: 0.8,
        borderWidth: 0,
        borderRadius: 1,
        borderSkipped: false,
        backgroundColor: "rgba(200, 105, 255, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['1-2'], response['result']['time_report_hrs'][lab[1]]['1-2'], response['result']['time_report_hrs'][lab[2]]['1-2'], response['result']['time_report_hrs'][lab[3]]['1-2'], response['result']['time_report_hrs'][lab[4]]['1-2'], response['result']['time_report_hrs'][lab[5]]['1-2']],
        maxBarThickness: 5
    }, {
        label: "2-3",
        tension: 0.8,
        borderWidth: 0,
        borderRadius: 1,
        borderSkipped: false,
        backgroundColor: "rgba(100, 155, 200, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['2-3'], response['result']['time_report_hrs'][lab[1]]['2-3'], response['result']['time_report_hrs'][lab[2]]['2-3'], response['result']['time_report_hrs'][lab[3]]['2-3'], response['result']['time_report_hrs'][lab[4]]['2-3'], response['result']['time_report_hrs'][lab[5]]['2-3']],
        maxBarThickness: 5
    }, {
        label: "3-5",
        tension: 0.8,
        borderWidth: 0,
        borderRadius: 1,
        borderSkipped: false,
        backgroundColor: "rgba(0, 200, 200, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['3-5'], response['result']['time_report_hrs'][lab[1]]['3-5'], response['result']['time_report_hrs'][lab[2]]['3-5'], response['result']['time_report_hrs'][lab[3]]['3-5'], response['result']['time_report_hrs'][lab[4]]['3-5'], response['result']['time_report_hrs'][lab[5]]['3-5']],
        maxBarThickness: 5
    }, {
        label: "5-10",
        tension: 0.8,
        borderWidth: 0,
        borderRadius: 1,
        borderSkipped: false,
        backgroundColor: "rgba(204,0,0, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['5-10'], response['result']['time_report_hrs'][lab[1]]['5-10'], response['result']['time_report_hrs'][lab[2]]['5-10'], response['result']['time_report_hrs'][lab[3]]['5-10'], response['result']['time_report_hrs'][lab[4]]['5-10'], response['result']['time_report_hrs'][lab[5]]['5-10']],
        maxBarThickness: 5
    }, {
        label: "10-15",
        tension: 0.8,
        borderWidth: 1,
        borderRadius: 4,
        borderSkipped: false,
        backgroundColor: "rgba(102,0,51, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['10-15'], response['result']['time_report_hrs'][lab[1]]['10-15'], response['result']['time_report_hrs'][lab[2]]['10-15'], response['result']['time_report_hrs'][lab[3]]['10-15'], response['result']['time_report_hrs'][lab[4]]['10-15'], response['result']['time_report_hrs'][lab[5]]['10-15']],
        maxBarThickness: 5
    }, {
        label: "15-60",
        tension: 0.8,
        borderWidth: 1,
        borderRadius: 4,
        borderSkipped: false,
        backgroundColor: "rgba(255,153,51, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['15-60'], response['result']['time_report_hrs'][lab[1]]['15-60'], response['result']['time_report_hrs'][lab[2]]['15-60'], response['result']['time_report_hrs'][lab[3]]['15-60'], response['result']['time_report_hrs'][lab[4]]['15-60'], response['result']['time_report_hrs'][lab[5]]['15-60']],
        maxBarThickness: 5
    }];
    var timedata = new Chart(ctx, {
        type: "bar",
        data: {
            labels: lab_num,
            datasets: dataset,
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false,
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            var label = context.dataset.label || '';

                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += parseInt(context.parsed.y) + ' min';
                            }
                            return label;
                        }
                    }
                }
            },
            interaction: {
                intersect: false,
                mode: 'index',
            },
            scales: {
                y: {
                    stacked: true,
                    grid: {
                        drawBorder: false,
                        display: true,
                        drawOnChartArea: true,
                        drawTicks: false,
                        borderDash: [5, 5],
                        color: 'rgba(255, 255, 255, .2)'
                    },
                    ticks: {
                        suggestedMin: 0,
                        suggestedMax: 500,
                        beginAtZero: true,
                        padding: 10,
                        font: {
                            size: 14,
                            weight: 300,
                            family: "Roboto",
                            style: 'normal',
                            lineHeight: 2
                        },
                        color: "#fff",
                        callback: function(label, index, labels) {
                            return label + ' min';

                            // return _label;
                        }
                    },
                },
                x: {
                    stacked: true,
                    grid: {
                        drawBorder: false,
                        display: true,
                        drawOnChartArea: true,
                        drawTicks: false,
                        borderDash: [5, 5],
                        color: 'rgba(255, 255, 255, .2)',

                    },
                    ticks: {
                        display: true,
                        color: '#f8f9fa',
                        padding: 10,
                        font: {
                            size: 14,
                            weight: 300,
                            family: "Roboto",
                            style: 'normal',
                            lineHeight: 2
                        }
                    }
                },
            },
        },
    });

    var shippingCharbar = ShippingCharBar()
},
});
}

<!--===== Shipping ======-->

function ShippingCharBar() {
$.ajax({
type: "GET",
url: "report/shipping",
data: {},
contentType: "application/json",
dataType: "json",
success: function(response) {

    console.log(response)
    var ctx = document.getElementById("chart-bars-shipping").getContext("2d");

    firstShipping = response['result']['pretime'];
    timeIntervalCount = response['result']['hrShippingCount']



    var lab = []
    var lab_num = []
    for (var da = 6; da >= 0; da--) {
        var date = new Date();
        date.setDate(date.getDate() - da);

        var finalDate = date.getDate() + '-' + (date.getMonth() + 1) + '-' + date.getFullYear();
        var finalDateNum = (date.getMonth() + 1) + '/' + date.getDate();
        lab.push(finalDate)
        lab_num.push(finalDateNum)
    }

    for (so = 0; so <= 6; so++) {
        if (response['result']['time_report_count'][lab[so]] === undefined) {
            response['result']['time_report_count'][lab[so]] = {
                "0-1": 0,
                "1-2": 0,
                "2-3": 0,
                "3-5": 0,
                "5-10": 0,
                "10-15": 0,
                "15-60": 0
            };
            response['result']['time_report_hrs'][lab[so]] = {
                "0-1": 0,
                "1-2": 0,
                "2-3": 0,
                "3-5": 0,
                "5-10": 0,
                "10-15": 0,
                "15-60": 0
            };
            response['result']['time_report'][lab[so]] = {
                "0-1": 0,
                "1-2": 0,
                "2-3": 0,
                "3-5": 0,
                "5-10": 0,
                "10-15": 0,
                "15-60": 0
            };

        }
    }
    console.log(lab)
    console.log(response)


    var dataset = [{
        label: "0-1",
        tension: 0.8,
        borderWidth: 0,
        borderRadius: 0,
        borderSkipped: false,
        backgroundColor: "rgba(255,69,0, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['0-1'], response['result']['time_report_hrs'][lab[1]]['0-1'], response['result']['time_report_hrs'][lab[2]]['0-1'], response['result']['time_report_hrs'][lab[3]]['0-1'], response['result']['time_report_hrs'][lab[4]]['0-1'], response['result']['time_report_hrs'][lab[5]]['0-1']],
        maxBarThickness: 5
    },{
        label: "1-2",
        tension: 0.8,
        borderWidth: 0,
        borderRadius: 0,
        borderSkipped: false,
        backgroundColor: "rgba(255,215,0, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['1-2'], response['result']['time_report_hrs'][lab[1]]['1-2'], response['result']['time_report_hrs'][lab[2]]['1-2'], response['result']['time_report_hrs'][lab[3]]['1-2'], response['result']['time_report_hrs'][lab[4]]['1-2'], response['result']['time_report_hrs'][lab[5]]['1-2']],
        maxBarThickness: 5
    }, {
        label: "2-3",
        tension: 0.8,
        borderWidth: 0,
        borderRadius: 0,
        borderSkipped: false,
        backgroundColor: "rgba(100, 155, 200, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['2-3'], response['result']['time_report_hrs'][lab[1]]['2-3'], response['result']['time_report_hrs'][lab[2]]['2-3'], response['result']['time_report_hrs'][lab[3]]['2-3'], response['result']['time_report_hrs'][lab[4]]['2-3'], response['result']['time_report_hrs'][lab[5]]['2-3']],
        maxBarThickness: 5
    }, {
        label: "3-5",
        tension: 0.8,
        borderWidth: 0,
        borderRadius: 0,
        borderSkipped: false,
        backgroundColor: "rgba(0, 200, 200, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['3-5'], response['result']['time_report_hrs'][lab[1]]['3-5'], response['result']['time_report_hrs'][lab[2]]['3-5'], response['result']['time_report_hrs'][lab[3]]['3-5'], response['result']['time_report_hrs'][lab[4]]['3-5'], response['result']['time_report_hrs'][lab[5]]['3-5']],
        maxBarThickness: 5
    }, {
        label: "5-10",
        tension: 0.8,
        borderWidth: 0,
        borderRadius: 0,
        borderSkipped: false,
        backgroundColor: "rgba(204,0,0, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['5-10'], response['result']['time_report_hrs'][lab[1]]['5-10'], response['result']['time_report_hrs'][lab[2]]['5-10'], response['result']['time_report_hrs'][lab[3]]['5-10'], response['result']['time_report_hrs'][lab[4]]['5-10'], response['result']['time_report_hrs'][lab[5]]['5-10']],
        maxBarThickness: 5
    }, {
        label: "10-15",
        tension: 0.8,
        borderWidth: 1,
        borderRadius: 0,
        borderSkipped: false,
        backgroundColor: "rgba(102,0,51, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['10-15'], response['result']['time_report_hrs'][lab[1]]['10-15'], response['result']['time_report_hrs'][lab[2]]['10-15'], response['result']['time_report_hrs'][lab[3]]['10-15'], response['result']['time_report_hrs'][lab[4]]['10-15'], response['result']['time_report_hrs'][lab[5]]['10-15']],
        maxBarThickness: 5
    }, {
        label: "15-60",
        tension: 0.8,
        borderWidth: 1,
        borderRadius: 0,
        borderSkipped: false,
        backgroundColor: "rgba(255,153,51, .6)",
        data: [response['result']['time_report_hrs'][lab[0]]['15-60'], response['result']['time_report_hrs'][lab[1]]['15-60'], response['result']['time_report_hrs'][lab[2]]['15-60'], response['result']['time_report_hrs'][lab[3]]['15-60'], response['result']['time_report_hrs'][lab[4]]['15-60'], response['result']['time_report_hrs'][lab[5]]['15-60']],
        maxBarThickness: 5
    }];
    var timedata = new Chart(ctx, {
        type: "bar",
        data: {
            labels: lab_num,
            datasets: dataset,
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false,
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            var label = context.dataset.label || '';

                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += parseInt(context.parsed.y) + ' min';
                            }
                            return label;
                        }
                    }
                }
            },
            interaction: {
                intersect: false,
                mode: 'index',
            },
            scales: {
                y: {
                    stacked: true,
                    grid: {
                        drawBorder: false,
                        display: true,
                        drawOnChartArea: true,
                        drawTicks: false,
                        borderDash: [5, 5],
                        color: 'rgba(255, 255, 255, .2)'
                    },
                    ticks: {
                        suggestedMin: 0,
                        suggestedMax: 500,
                        beginAtZero: true,
                        padding: 10,
                        font: {
                            size: 14,
                            weight: 300,
                            family: "Roboto",
                            style: 'normal',
                            lineHeight: 2
                        },
                        color: "#fff",
                        callback: function(label, index, labels) {
                            return label + ' min';

                            // return _label;
                        }
                    },
                },
                x: {
                    stacked: true,
                    grid: {
                        drawBorder: false,
                        display: true,
                        drawOnChartArea: true,
                        drawTicks: false,
                        borderDash: [5, 5],
                        color: 'rgba(255, 255, 255, .2)',

                    },
                    ticks: {
                        display: true,
                        color: '#f8f9fa',
                        padding: 10,
                        font: {
                            size: 14,
                            weight: 300,
                            family: "Roboto",
                            style: 'normal',
                            lineHeight: 2
                        }
                    }
                },
            },
        },
    });

  var chartLine = ChartLine(lab)

},
});


 }

function ChartLine(lab) {

    var lab = []
    var lab_num = []
    for (var da = 6; da >= 0; da--) {
        var date = new Date();
        date.setDate(date.getDate() - da);

        var finalDate = date.getDate() + '-' + (date.getMonth() + 1) + '-' + date.getFullYear();
        var finalDateNum = (date.getMonth() + 1) + '/' + date.getDate();
        lab.push(finalDate)
        lab_num.push(finalDateNum)
    }

    var ctx2 = document.getElementById("chart-line").getContext("2d");

    for (so = 0; so <= 6; so++) {
        if (firstMotion[lab[so]] === undefined) {
            firstMotion[lab[so]] = 0;
            firstShipping[lab[so]] = 0;

        }
    }

    new Chart(ctx2, {
      type: "line",
      data: {
        labels: lab_num,
        datasets: [{
          label: "Boxing area",
          tension: 0,
          borderWidth: 0,
          pointRadius: 5,
          pointBackgroundColor: "rgba(255, 255, 255, .6)",
          pointBorderColor: "transparent",
          borderColor: "rgba(255, 255, 255, .6)",
          borderColor: "rgba(255, 255, 255, .6)",
          borderWidth: 4,
          backgroundColor: "transparent",
          fill: true,
          data: [parseInt(firstMotion[lab[0]]-firstShipping[lab[0]])/60,parseInt(firstMotion[lab[1]]-firstShipping[lab[1]])/60, parseInt(firstMotion[lab[2]]-firstShipping[lab[2]])/60, parseInt(firstMotion[lab[3]]-firstShipping[lab[3]])/60, parseInt(firstMotion[lab[4]]-firstShipping[lab[4]])/60, parseInt(firstMotion[lab[5]]-firstShipping[lab[5]])/60, parseInt(firstMotion[lab[6]]-firstShipping[lab[6]])/60],
          maxBarThickness: 6

        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false,
          },tooltip: {
                    callbacks: {
                        label: function(context) {
                            var label = context.dataset.label || '';

                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += parseInt(context.parsed.y) + ' min';
                            }
                            return label;
                        }
                    }
                }
        },
        interaction: {
          intersect: false,
          mode: 'index',
        },
        scales: {
          y: {
            grid: {
              drawBorder: false,
              display: true,
              drawOnChartArea: true,
              drawTicks: false,
              borderDash: [5, 5],
              color: 'rgba(255, 255, 255, .2)'
            },
            ticks: {
              display: true,
              color: '#f8f9fa',
                        callback: function(label, index, labels) {
                            return label + ' min';

                            // return _label;
                        },
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
          x: {
            grid: {
              drawBorder: false,
              display: false,
              drawOnChartArea: false,
              drawTicks: false,
              borderDash: [5, 5]
            },
            ticks: {
              display: true,
              color: '#f8f9fa',
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
        },
      },
    });



<!--    0000000000000000-->
var chartLineData = chartLineDataAdd()

}



function chartLineDataAdd() {
    var ctx2 = document.getElementById("chart-line-date").getContext("2d");

     var lab = []
    var lab_num = []
    for (var da = 6; da >= 0; da--) {
        var date = new Date();
        date.setDate(date.getDate() - da);

        var finalDate = date.getDate() + '-' + (date.getMonth() + 1) + '-' + date.getFullYear();
        var finalDateNum = (date.getMonth() + 1) + '/' + date.getDate();
        lab.push(finalDate)
        lab_num.push(finalDateNum)
    }

    for (so = 0; so <= 6; so++) {
      if (timeIntervalCount[lab[so]]  === undefined ) {
          timeIntervalCount[lab[so]] = {0: 0,
          1: 0,
          2: 0,
          3: 0,
          4: 0,
          5: 0,
          6: 0,
          7: 0,
          8: 0,
          9: 0,
          10: 0,
          11: 0,
          12: 0,
          13: 0,
          14: 0,
          15: 0,
          16: 0,
          17: 0,
          18: 0,
          19: 0,
          20: 0,
          21: 0,
          22: 0,
          23: 0
          };
      }
    }


    var data = {
  labels: lab_num,
  datasets: []
};

   var cxp =  new Chart(ctx2, {
  type: 'bar',
  data: data,
  options: {
    responsive: true,
    maintainAspectRatio: false,
    color: 'rgba(255, 255, 255, .2)',
    plugins: {
      legend: {
        position: false,
      },
      scales: {
          y: {
            grid: {
              drawBorder: false,
              display: true,
              drawOnChartArea: true,
              drawTicks: false,
              borderDash: [5, 5],
              color: 'rgba(255, 255, 255, .2)'
            },
            ticks: {
              display: true,
              color: '#f8f9fa',
                        callback: function(label, index, labels) {
                            return label + ' min';

                            // return _label;
                        },
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
          x: {
            grid: {
              drawBorder: false,
              display: false,
              drawOnChartArea: false,
              drawTicks: false,
              borderDash: [5, 5]
            },
            ticks: {
              display: true,
              color: '#f8f9fa',
              padding: 10,
              font: {
                size: 14,
                weight: 300,
                family: "Roboto",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
        }
    }
  },
});

var color = {0:'#ffffff',
              1:'#ffffff',
              2:'#ffffff',
              3:'#ffffff',
              4:'#800080',
              5:'#00008B',
              6:'#FFC0CB',
              7:'#FFA500',
              8:'#FFFF00',
              9:'#808080',
              10:'#FFA000',
              11:'#657383',
              12:'#16E2F5',
              13:'#848B79',
              14:'#550A35',
              15:'#7E587E',
              16:'#FBFBF9',
              17:'#8B0000',
              18:'#ffffff',
              19:'#ffffff',
              20:'#ffffff',
              21:'#ffffff',
              22:'#ffffff',
              23:'#ffffff'
              }
              var lb_hrs = {};
  for(x = 0; x <=23; x++) {

    lb_hrs[x] = x + 'hrs';
    var newDataset = {
        label: 'Hr ' + (x + 1),
        backgroundColor: color[x],
        borderWidth: 0,
        tension: 0,
      };
      cxp.data.datasets.push(newDataset);
      cxp.update();

      for(xp = 0; xp <=6; xp++) {
       cxp.data.datasets[x].data.push(timeIntervalCount[lab[xp]][x]);
       }

      }



var ctx2 = document.getElementById("chart-doughnut").getContext("2d");


var newcolor = [] ;
var newLab = [] ;
    var pp = 0;
console.log(color[0])
var pp=0;
for (x = 0 ;x <= 23; x++) {
         var sum = 0;
        for(xp = 0; xp <=6; xp++) {
        sum = sum + timeIntervalCount[lab[xp]][x];

         }
         console.log(x)
         console.log(color[4])
         if(sum > 0 ){
         newcolor[pp] = color[x];
         newLab[x + 'Hrs'] = x + 'Hrs';
         pp = pp + 1;
         }
     }



 var data = {
  labels: newLab,
  datasets: []
};

   var cxprt =  new Chart(ctx2, {
  type: 'doughnut',
  data: {labels:newLab},
  options: {
    responsive: true,
    maintainAspectRatio: false,
    color: 'rgba(255, 255, 255, .2)',
    plugins: {
      legend: {
        position: false,
      },

    }
  },
});

console.log(newcolor)
console.log(newLab)
var newDataset = {
        label: 'Hrs',
        backgroundColor: newcolor,
        borderWidth: 0,
        tension: 0,
      };
      cxprt.data.datasets.push(newDataset);
      cxprt.update();

    console.log(cxprt.data.datasets[0]);

    var newcolor = [] ;
    var pp = 0;
    for (x = 0 ;x <= 23; x++) {
         var sum = 0;
        for(xp = 0; xp <=6; xp++) {
        sum = sum + timeIntervalCount[lab[xp]][x];

         }
          cxprt.data.labels.push(x + 'Hr');
         cxprt.data.datasets[0].data.push(sum);
         if(sum > 0 ){
         newcolor[pp] = color[x];
         pp = pp + 1;
         }
<!--         #cxprt.data.datasets[0].backgroundColor.push(newcolor);-->
         cxprt.update();
     }






<!--    0000000000000000-->


}

function getColors(length){
    let pallet = ["#0074D9", "#FF4136", "#2ECC40", "#FF851B", "#7FDBFF", "#B10DC9", "#FFDC00", "#001f3f", "#39CCCC", "#01FF70", "#85144b", "#F012BE", "#3D9970", "#111111", "#AAAAAA"];
    let colors = [];

    for(let i = 0; i < length; i++) {
      colors.push(pallet[i % (pallet.length - 1)]);
    }

    return colors;
  }
});








  </script>

{% endblock javascripts %}
